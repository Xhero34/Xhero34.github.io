<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Para Mi Valentina üíò</title>

  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Poppins:wght@300;400;600&family=Great+Vibes&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary: #ff2e63;
      --gold: #ffd700;
      --bg-color: #ffeef2;
    }

    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: var(--bg-color);
      background-image: radial-gradient(#ffccd5 1px, transparent 1px);
      background-size: 20px 20px;
      color: #444;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      overflow-x: hidden;
      padding: 15px;
    }

    .card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 30px;
      padding: 30px 20px;
      width: 100%;
      max-width: 400px;
      box-shadow: 0 20px 40px rgba(255, 46, 99, 0.15);
      text-align: center;
      position: relative;
      border: 2px solid #fff;
      z-index: 10;
    }

    h1 { font-family: 'Playfair Display', serif; font-size: 1.6rem; color: var(--primary); margin-bottom: 15px; }
    p { font-size: 0.95rem; line-height: 1.6; color: #555; margin-bottom: 20px; }

    .btn-container { display: flex; flex-direction: column; gap: 10px; align-items: center; }

    button {
      border: none;
      padding: 14px 25px;
      border-radius: 50px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 100%;
      max-width: 280px;
    }

    .btn-main { background: var(--primary); color: white; box-shadow: 0 5px 15px rgba(255, 46, 99, 0.2); }
    .btn-gold {
      background: linear-gradient(45deg, #ff9a9e, #ff2e63);
      color: white;
      border: 2px solid var(--gold);
      animation: pulseGold 2s infinite;
      margin-bottom: 15px;
    }

    @keyframes pulseGold {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.03); }
    }

    /* Estilo para el mensaje emotivo y el coraz√≥n */
    .emotional-box { text-align: justify; font-size: 0.9rem; background: #fff0f3; padding: 15px; border-radius: 15px; border-left: 4px solid var(--primary); margin-bottom: 20px; }

    #mainHeart { font-size: 70px; cursor: pointer; display: inline-block; transition: transform 0.1s; margin: 10px 0; }

    #noBtn { background: #eee; color: #888; position: relative; }

    /* Pantalla Final */
    #finalOverlay {
      position: fixed; inset: 0; background: white; z-index: 100;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      opacity: 0; pointer-events: none; transition: opacity 1s ease; padding: 20px; text-align: center;
    }
    #finalOverlay.show { opacity: 1; pointer-events: auto; }
    .romantic-text { font-family: 'Great Vibes', cursive; font-size: 4.5rem; color: var(--primary); margin: 0; }

    .heart-particle { position: absolute; color: var(--primary); animation: fly 4s linear forwards; pointer-events: none; }
    @keyframes fly { 0% { transform: translateY(0) rotate(0); opacity: 1; } 100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; } }

    .hidden { display: none !important; }
  </style>
</head>
<body>

  <audio id="bgMusic" src="serendipity.mp3" loop></audio>

  <div id="finalOverlay">
    <h2 class="romantic-text">Te Amo</h2>
    <p style="font-weight: bold; color: var(--primary); margin-top: 20px;">üíò Feliz 14 de Febrero, Valentina üíò</p>
  </div>

  <div class="card" id="gameCard">
    <div id="step-0">
      <button class="btn-gold" onclick="jumpToFinal()">‚ú® Feliz 14 de Febrero ‚ú®</button>
      <h1>Hola Valentina üíò</h1>
      <p>Hice este peque√±o juego para recordarte cu√°nto te amo. ¬øEmpezamos?</p>
      <button class="btn-main" onclick="nextStep(1)">¬°S√≠, vamos! üòç</button>
    </div>

    <div id="quiz-container" class="hidden">
      <h1 id="quiz-title">Pregunta</h1>
      <p id="quiz-question"></p>
      <div class="btn-container" id="quiz-options"></div>
    </div>

    <div id="heart-step" class="hidden">
      <div class="emotional-box">
        Lo que m√°s me gusta de ti es que a pesar de las adversidades y problemas que has tenido, 
        eres una chica muy fuerte y capaz que siempre intenta resolver. Y aunque siempre lo intentes 
        hacer todo t√∫ sola... eres inteligente, con un bonito coraz√≥n y sabes amar. 
        Creo en ti en todo, y en lo que puedes lograr. Te amo mucho.
      </div>
      <p style="font-weight: bold; color: var(--primary); margin-bottom: 5px;">¬°Ahora llena este coraz√≥n!</p>
      <div id="mainHeart">ü§ç</div>
      <p id="progressText" style="font-weight: bold;">0%</p>
    </div>

    <div id="step-final" class="hidden">
      <h1>Una √∫ltima cosa...</h1>
      <p>¬øQuieres seguir escribiendo esta historia conmigo?</p>
      <div class="btn-container" style="position: relative; min-height: 180px;">
        <button class="btn-main" id="yesBtn" onclick="jumpToFinal()" style="position: absolute; top: 0; z-index: 20;">¬°S√ç, POR SIEMPRE! ‚ù§Ô∏è</button>
        <button id="noBtn" onmouseover="moveNo()" onclick="moveNo()" style="position: absolute; top: 75px;">No</button>
      </div>
    </div>
  </div>

  <script>
    let currentStep = 0;
    let quizIndex = 0;
    let heartClicks = 0;
    let noCount = 0;
    const music = document.getElementById('bgMusic');

    const questions = [
      { q: "¬øQu√© anillo te regal√©?", ops: ["Un anillo de girasol", "Anillo de plata", "No tengo"], ans: 0 },
      { q: "¬øPor d√≥nde nos conocimos?", ops: ["Facebook", "X (Twitter)", "Instagram"], ans: 2 },
      { q: "¬øCu√°ndo cumplimos mes?", ops: ["El 20", "El 19", "El 16"], ans: 2 },
      { q: "¬øQu√© es lo que m√°s me gusta de ti?", ops: ["Tus ojos", "Tu cuerpo", "Tu sonrisa"], special: true }
    ];

    function nextStep(step) {
      if(currentStep === 0) music.play().catch(() => {});
      document.getElementById('step-0').classList.add('hidden');
      
      if(step === 1) {
        document.getElementById('quiz-container').classList.remove('hidden');
        showQuestion();
      }
    }

    function showQuestion() {
      const data = questions[quizIndex];
      document.getElementById('quiz-title').innerText = `Pregunta ${quizIndex + 1}`;
      document.getElementById('quiz-question').innerText = data.q;
      const optionsDiv = document.getElementById('quiz-options');
      optionsDiv.innerHTML = "";

      data.ops.forEach((opt, index) => {
        const btn = document.createElement('button');
        btn.className = "btn-main";
        btn.innerText = opt;
        btn.onclick = () => handleAnswer(index, data.special);
        optionsDiv.appendChild(btn);
      });
    }

    function handleAnswer(index, isSpecial) {
      if(isSpecial) {
        const optionsDiv = document.getElementById('quiz-options');
        optionsDiv.innerHTML = `<button class="btn-main" style="background: #333;" onclick="showEmotionalPart()">Ninguna</button>`;
      } else {
        if(index === questions[quizIndex].ans) {
          quizIndex++;
          if(quizIndex < questions.length) showQuestion();
        } else {
          alert("¬°Casi! Int√©ntalo de nuevo ‚ù§Ô∏è");
        }
      }
    }

    function showEmotionalPart() {
      document.getElementById('quiz-container').classList.add('hidden');
      document.getElementById('heart-step').classList.remove('hidden');
      setupHeart();
    }

    function setupHeart() {
      const h = document.getElementById('mainHeart');
      h.onclick = () => {
        heartClicks++;
        let p = heartClicks * 10;
        document.getElementById('progressText').innerText = p + "%";
        h.style.transform = `scale(${1 + heartClicks * 0.1})`;
        
        if(heartClicks === 3) h.innerText = "üíñ";
        if(heartClicks === 6) h.innerText = "üíó";
        if(heartClicks === 10) {
          h.innerText = "‚ù§Ô∏è";
          setTimeout(() => {
            document.getElementById('heart-step').classList.add('hidden');
            document.getElementById('step-final').classList.remove('hidden');
          }, 600);
        }
      };
    }

    function moveNo() {
      const noBtn = document.getElementById('noBtn');
      const yesBtn = document.getElementById('yesBtn');
      const x = Math.random() * 100 - 50;
      const y = Math.random() * 60 + 40;
      noBtn.style.transform = `translate(${x}px, ${y}px)`;
      noCount++;
      yesBtn.style.transform = `scale(${1 + (noCount * 0.15)})`;
      const phrases = ["¬øSegura?", "Pi√©nsalo...", "Mmm... no", "¬°Epa!", "¬°El otro bot√≥n!"];
      if(noCount < phrases.length) noBtn.innerText = phrases[noCount];
    }

    function jumpToFinal() {
      document.getElementById('gameCard').classList.add('hidden');
      document.getElementById('finalOverlay').classList.add('show');
      setInterval(createHeart, 200);
      if(music.duration > 60) music.currentTime = 65;
      music.play();
    }

    function createHeart() {
      const h = document.createElement('div');
      h.classList.add('heart-particle');
      h.innerHTML = "‚ù§Ô∏è";
      h.style.left = Math.random() * 100 + "vw";
      h.style.top = "100vh";
      h.style.fontSize = Math.random() * 20 + 20 + "px";
      document.body.appendChild(h);
      setTimeout(() => h.remove(), 4000);
    }
  </script>
</body>
</html>
